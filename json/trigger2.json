{
    "on_insert": [
        {
            "type": "sql",
            "sql": "DO $$ DECLARE v_counter integer; v_code varchar(2) ; v_odg_no varchar(2) ; v_resgrp_cd varchar(2) ; v_reslin_cd varchar(2) ; v_status_cd varchar(1) ; v_dba_cd integer; v_portf_proj_cd varchar(1) ; v_description varchar(500) ; v_reslin_desc varchar(60) ; v_theme_desc_length integer; v_d_registrat_date date; v_d_ins_date date; v_future_registrat date; v_valid_to date; v_userid varchar(30) ; v_is_admin_cnt integer := 0; v_sec_mol_cnt integer := 0; v_molecule_id varchar(5) := null; v_molecule_rg_no varchar(20) := null; v_molec_in_lic_prtnr varchar(15) := null; v_new_rg_no VARCHAR(20) ; v_comparator_ind VARCHAR(1) ; v_theme_desc_proposal VARCHAR(500) ; v_short_name varchar(30) ; c_molecule_type_id constant INTEGER := 99; c_pharmacological_type_id constant INTEGER := 19; v_evolved_nmp_cnt integer; v_trademark_no NUMERIC; v_molecule_type_id INTEGER; v_pharmacological_type_id INTEGER; v_count_t_mappings integer; v_count_t_mol_map integer; v_seq_no_duplicate_cnt integer; v_manual_short_desc VARCHAR(30) ; invalid_mapping_exists BOOLEAN := FALSE; v_trigger_name varchar(100) := 'COMPANY_ADDRESSES_IOF'; cntr integer; v_country_cd VARCHAR(10) ; v_company_type_cd VARCHAR(10) ; v_valid_from DATE; i1 RECORD; v_molecule_seq_no INTEGER; BEGIN CASE WHEN :new_molecule_seq_no = v_count_t_mappings + 1 THEN IF invalid_mapping_exists THEN UPDATE gmd.theme_molecule_map tmm SET tmm.valid_ind = 'Y', tmm.molecule_seq_no = :new_molecule_seq_no WHERE tmm.theme_no = :new_theme_no AND tmm.molecule_id = :new_molecule_id; END $$;"
        }
    ],
    "on_update": [
        {
            "type": "sql",
            "sql": "DO $$ DECLARE v_counter integer; v_code varchar(2) ; v_odg_no varchar(2) ; v_resgrp_cd varchar(2) ; v_reslin_cd varchar(2) ; v_status_cd varchar(1) ; v_dba_cd integer; v_portf_proj_cd varchar(1) ; v_description varchar(500) ; v_reslin_desc varchar(60) ; v_theme_desc_length integer; v_d_registrat_date date; v_d_ins_date date; v_future_registrat date; v_valid_to date; v_userid varchar(30) ; v_is_admin_cnt integer := 0; v_sec_mol_cnt integer := 0; v_molecule_id varchar(5) := null; v_molecule_rg_no varchar(20) := null; v_molec_in_lic_prtnr varchar(15) := null; v_new_rg_no VARCHAR(20) ; v_comparator_ind VARCHAR(1) ; v_theme_desc_proposal VARCHAR(500) ; v_short_name varchar(30) ; c_molecule_type_id constant INTEGER := 99; c_pharmacological_type_id constant INTEGER := 19; v_evolved_nmp_cnt integer; v_trademark_no NUMERIC; v_molecule_type_id INTEGER; v_pharmacological_type_id INTEGER; v_count_t_mappings integer; v_count_t_mol_map integer; v_seq_no_duplicate_cnt integer; v_manual_short_desc VARCHAR(30) ; invalid_mapping_exists BOOLEAN := FALSE; v_trigger_name varchar(100) := 'COMPANY_ADDRESSES_IOF'; cntr integer; v_country_cd VARCHAR(10) ; v_company_type_cd VARCHAR(10) ; v_valid_from DATE; i1 RECORD; v_molecule_seq_no INTEGER; BEGIN IF :new_molecule_seq_no > v_count_t_mappings THEN RAISE EXCEPTION 'MDM_THEME_MOLECULE_MAP_IOF: err_upd_inv_map'; END $$;"
        }
    ],
    "on_delete": [
        {
            "type": "sql",
            "sql": "DO $$ DECLARE v_counter integer; v_code varchar(2) ; v_odg_no varchar(2) ; v_resgrp_cd varchar(2) ; v_reslin_cd varchar(2) ; v_status_cd varchar(1) ; v_dba_cd integer; v_portf_proj_cd varchar(1) ; v_description varchar(500) ; v_reslin_desc varchar(60) ; v_theme_desc_length integer; v_d_registrat_date date; v_d_ins_date date; v_future_registrat date; v_valid_to date; v_userid varchar(30) ; v_is_admin_cnt integer := 0; v_sec_mol_cnt integer := 0; v_molecule_id varchar(5) := null; v_molecule_rg_no varchar(20) := null; v_molec_in_lic_prtnr varchar(15) := null; v_new_rg_no VARCHAR(20) ; v_comparator_ind VARCHAR(1) ; v_theme_desc_proposal VARCHAR(500) ; v_short_name varchar(30) ; c_molecule_type_id constant INTEGER := 99; c_pharmacological_type_id constant INTEGER := 19; v_evolved_nmp_cnt integer; v_trademark_no NUMERIC; v_molecule_type_id INTEGER; v_pharmacological_type_id INTEGER; v_count_t_mappings integer; v_count_t_mol_map integer; v_seq_no_duplicate_cnt integer; v_manual_short_desc VARCHAR(30) ; invalid_mapping_exists BOOLEAN := FALSE; v_trigger_name varchar(100) := 'COMPANY_ADDRESSES_IOF'; cntr integer; v_country_cd VARCHAR(10) ; v_company_type_cd VARCHAR(10) ; v_valid_from DATE; i1 RECORD; v_molecule_seq_no INTEGER; BEGIN UPDATE gmd.theme_molecule_map tmm SET tmm.valid_ind = 'N' WHERE tmm.theme_no = :old_theme_no AND tmm.molecule_id = :old_molecule_id; UPDATE gmd.theme_molecule_map tmm SET tmm.molecule_seq_no = tmm.molecule_seq_no - 1 WHERE tmm.theme_no = :old_theme_no AND tmm.molecule_seq_no > :old_molecule_seq_no AND tmm.valid_ind = 'Y'; mdmappl.CALL mdmappl.mdm_util_themes$refresh_theme_desc_mrhub(p_theme_no = > :old_theme_no, p_molecule_id = > :old_molecule_id, p_date = > CURRENT_TIMESTAMP, p_manual_short_desc = > v_manual_short_desc) ; END $$;"
        }
    ]
}