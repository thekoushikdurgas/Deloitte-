{
  "declarations": {
    "variables": [
      {
        "name": "V_ACTION",
        "data_type": "TEXT",
        "default_value": null
      },
      {
        "name": "COL_NAMES",
        "data_type": "TEXT[]",
        "default_value": null
      },
      {
        "name": "COL_NEW_VALUES",
        "data_type": "TEXT[]",
        "default_value": null
      },
      {
        "name": "COL_OLD_VALUES",
        "data_type": "TEXT[]",
        "default_value": null
      },
      {
        "name": "V_TABLE_NAME",
        "data_type": "TEXT",
        "default_value": "LOWER(TG_TABLE_NAME) || '_his'"
      },
      {
        "name": "V_SCHEMA_NAME",
        "data_type": "TEXT",
        "default_value": "LOWER(TG_TABLE_SCHEMA)"
      }
    ],
    "constants": [],
    "exceptions": []
  },
  "main": {
    "type": "begin_end",
    "begin_line_no": 9,
    "begin_indent": 0,
    "begin_end_statements": [
      {
        "condition": " TG_OP = 'INSERT' ",
        "type": "if_else",
        "if_line_no": 10,
        "then_line_no": 10,
        "if_indent": 4,
        "end_if_line_no": 16,
        "then_statements": [
          {
            "type": "assignment",
            "variable_name": "V_ACTION",
            "assignment_operator": ":=",
            "expression": "'I';",
            "assignment_line_no": 11,
            "assignment_indent": 8
          }
        ],
        "if_elses": [
          {
            "type": "elif_statement",
            "elif_line_no": 12,
            "elif_indent": 4,
            "condition": "TG_OP = 'UPDATE'",
            "then_line_no": 12,
            "then_statements": [
              {
                "type": "assignment",
                "variable_name": "V_ACTION",
                "assignment_operator": ":=",
                "expression": "'U';",
                "assignment_line_no": 13,
                "assignment_indent": 8
              }
            ]
          },
          {
            "type": "elif_statement",
            "elif_line_no": 14,
            "elif_indent": 4,
            "condition": "TG_OP = 'DELETE'",
            "then_line_no": 14,
            "then_statements": [
              {
                "type": "assignment",
                "variable_name": "V_ACTION",
                "assignment_operator": ":=",
                "expression": "'D';",
                "assignment_line_no": 15,
                "assignment_indent": 8
              }
            ]
          }
        ],
        "else_statements": []
      },
      {
        "type": "assignment",
        "variable_name": "COL_NAMES",
        "assignment_operator": ":=",
        "expression": "ARRAY[ 'exploratory_theme_no', 'proposal_id', 'proposal_name', 'proposal_status_cd', 'evolved_theme_no', 'global_change_id', 'reason_for_change', 'ins_date', 'ins_user', 'upd_date', 'upd_user', 'molecule_type_id', 'pharmacological_type_id', 'firewall_id', 'mrhub_load_job_id', 'mrhub_load_date', 'mrhub_source_system_id' ];",
        "assignment_line_no": 18,
        "assignment_indent": 4
      },
      {
        "type": "assignment",
        "variable_name": "COL_NEW_VALUES",
        "assignment_operator": ":=",
        "expression": "ARRAY[ CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.EXPLORATORY_THEME_NO::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.PROPOSAL_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.PROPOSAL_NAME::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.PROPOSAL_STATUS_CD::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.EVOLVED_THEME_NO::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.GLOBAL_CHANGE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.REASON_FOR_CHANGE::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN TO_CHAR(NEW.INS_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.INS_USER::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN TO_CHAR(NEW.UPD_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.UPD_USER::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.MOLECULE_TYPE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.PHARMACOLOGICAL_TYPE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.FIREWALL_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.MRHUB_LOAD_JOB_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN TO_CHAR(NEW.MRHUB_LOAD_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('INSERT', 'UPDATE') THEN NEW.MRHUB_SOURCE_SYSTEM_ID::TEXT ELSE NULL END ];",
        "assignment_line_no": 19,
        "assignment_indent": 4
      },
      {
        "type": "assignment",
        "variable_name": "COL_OLD_VALUES",
        "assignment_operator": ":=",
        "expression": "ARRAY[ CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.EXPLORATORY_THEME_NO::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.PROPOSAL_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.PROPOSAL_NAME::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.PROPOSAL_STATUS_CD::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.EVOLVED_THEME_NO::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.GLOBAL_CHANGE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.REASON_FOR_CHANGE::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN TO_CHAR(OLD.INS_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.INS_USER::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN TO_CHAR(OLD.UPD_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.UPD_USER::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.MOLECULE_TYPE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.PHARMACOLOGICAL_TYPE_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.FIREWALL_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.MRHUB_LOAD_JOB_ID::TEXT ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN TO_CHAR(OLD.MRHUB_LOAD_DATE, 'YYYY-MM-DD HH24:MI:SS') ELSE NULL END, CASE WHEN TG_OP IN ('UPDATE', 'DELETE') THEN OLD.MRHUB_SOURCE_SYSTEM_ID::TEXT ELSE NULL END ];",
        "assignment_line_no": 20,
        "assignment_indent": 4
      },
      {
        "type": "function_calling",
        "function_name": "PERFORM MDMTOOL.\"mdmt_util_history$write_history\"",
        "parameters": {
          "parameter_type": "positional",
          "positional_params": [
            "V_ACTION",
            "V_TABLE_NAME",
            "V_SCHEMA_NAME",
            "COL_NAMES",
            "COL_NEW_VALUES",
            "COL_OLD_VALUES"
          ],
          "named_params": {},
          "raw_text": "V_ACTION, V_TABLE_NAME, V_SCHEMA_NAME, COL_NAMES, COL_NEW_VALUES, COL_OLD_VALUES"
        }
      },
      {
        "type": "return_statement",
        "sql_statement": "RETURN NULL;",
        "statement_line_no": 22,
        "statement_indent": 4
      }
    ],
    "exception_handlers": [],
    "exception_line_no": -1,
    "end_line_no": 23
  },
  "sql_comments": [],
  "rest_string_list": [],
  "conversion_stats": {
    "declaration_count": 6,
    "comment_count": 0,
    "sql_convert_count": {
      "select_statement": 0,
      "insert_statement": 0,
      "update_statement": 0,
      "delete_statement": 0,
      "raise_statement": 0,
      "assignment": 6,
      "for_loop": 0,
      "if_else": 1,
      "case_when": 0,
      "begin_end": 1,
      "exception_handler": 0,
      "function_calling": 1,
      "when_statement": 0,
      "elif_statement": 2,
      "fetch_statement": 0,
      "open_statement": 0,
      "exit_statement": 0,
      "close_statement": 0,
      "merge_statement": 0,
      "null_statement": 0,
      "return_statement": 1,
      "with_statement": 0
    }
  },
  "metadata": {
    "parse_timestamp": "2025-09-03T04:34:14.933359",
    "parser_version": "1.0",
    "file_details": {
      "filename": "trigger4.sql",
      "filepath": "D:\\DELOITTE\\ORACALE_to_json\\files\\oracle\\trigger4.sql",
      "filesize": 4099,
      "file_extension": ".sql",
      "last_modified": 1755020651.301754,
      "created_time": 1755020511.1863227,
      "is_file": true,
      "is_readable": true
    }
  }
}