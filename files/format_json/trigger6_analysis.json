{
  "declarations": {
    "variables": [
      {
        "name": "V_TRIGGER_NAME",
        "data_type": "VARCHAR2(100)",
        "default_value": "'MDM_V_NEW_MEDICINE_PROPOSALS_IOF'"
      },
      {
        "name": "V_EVOLVED_THEME_NO",
        "data_type": "V_NEW_MEDICINE_PROPOSALS.EVOLVED_THEME_NO%TYPE",
        "default_value": null
      },
      {
        "name": "V_PROPOSAL_ID",
        "data_type": "NUMBER",
        "default_value": null
      },
      {
        "name": "C_PROPOSAL_STATUS_ACTIVE",
        "data_type": "VARCHAR2(1)",
        "default_value": "'A'"
      },
      {
        "name": "C_PROPOSAL_STATUS_EVOLVED",
        "data_type": "VARCHAR2(1)",
        "default_value": "'E'"
      },
      {
        "name": "C_PROPOSAL_STATUS_TERMINATED",
        "data_type": "VARCHAR2(1)",
        "default_value": "'T'"
      }
    ],
    "constants": [],
    "exceptions": [
      {
        "name": "V_NO_UPDATE_TO_EVOLVED",
        "type": "EXCEPTION"
      },
      {
        "name": "V_NO_UPDATE_TERMINATED_TO_ACTIVE",
        "type": "EXCEPTION"
      },
      {
        "name": "V_NO_UPDATE_EVOLVED_TO_TERMINATED",
        "type": "EXCEPTION"
      },
      {
        "name": "V_EXPLORATORY_THEMENO_NOT_NULL",
        "type": "EXCEPTION"
      }
    ]
  },
  "main": {
    "type": "begin_end",
    "begin_line_no": 12,
    "begin_indent": 0,
    "begin_end_statements": [
      {
        "indent": 4,
        "line": "    V_EVOLVED_THEME_NO := :NEW.EVOLVED_THEME_NO;",
        "line_no": 13,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    IF (:NEW.PROPOSAL_STATUS_CD = C_PROPOSAL_STATUS_EVOLVED AND(:NEW.EVOLVED_THEME_NO IS NULL OR :NEW.EVOLVED_THEME_NO = :OLD.EVOLVED_THEME_NO) AND :NEW.MOLECULE_TYPE_ID = :OLD.MOLECULE_TYPE_ID AND :NEW.PHARMACOLOGICAL_TYPE_ID = :OLD.PHARMACOLOGICAL_TYPE_ID AND :NEW.PROPOSAL_NAME = :OLD.PROPOSAL_NAME) THEN",
        "line_no": 18,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE V_NO_UPDATE_TO_EVOLVED;",
        "line_no": 19,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    END IF;",
        "line_no": 20,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    IF (:NEW.PROPOSAL_STATUS_CD = C_PROPOSAL_STATUS_TERMINATED AND :OLD.PROPOSAL_STATUS_CD = C_PROPOSAL_STATUS_EVOLVED) THEN",
        "line_no": 24,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE V_NO_UPDATE_EVOLVED_TO_TERMINATED;",
        "line_no": 25,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    END IF;",
        "line_no": 26,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    IF (:NEW.PROPOSAL_STATUS_CD = C_PROPOSAL_STATUS_ACTIVE AND :OLD.EVOLVED_THEME_NO IS NOT NULL) THEN",
        "line_no": 30,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        V_EVOLVED_THEME_NO := NULL;",
        "line_no": 31,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    END IF;",
        "line_no": 32,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    IF (:NEW.EXPLORATORY_THEME_NO IS NULL AND :OLD.EXPLORATORY_THEME_NO IS NOT NULL) THEN",
        "line_no": 36,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE V_EXPLORATORY_THEMENO_NOT_NULL;",
        "line_no": 37,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    END IF;",
        "line_no": 38,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    IF (INSERTING) THEN",
        "line_no": 40,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        V_PROPOSAL_ID := PREDMD.SEQ_NMP_PROPOSAL_ID.NEXTVAL;",
        "line_no": 41,
        "is_end_semicolon": true
      },
      {
        "indent": 8,
        "line": "        INSERT INTO V_NEW_MEDICINE_PROPOSALS(",
        "line_no": 42,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_ID,",
        "line_no": 43,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            EXPLORATORY_THEME_NO,",
        "line_no": 44,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_NAME,",
        "line_no": 45,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_STATUS_CD,",
        "line_no": 46,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            EVOLVED_THEME_NO,",
        "line_no": 47,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            MOLECULE_TYPE_ID,",
        "line_no": 48,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PHARMACOLOGICAL_TYPE_ID,",
        "line_no": 49,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            FIREWALL_ID",
        "line_no": 50,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        ) VALUES (",
        "line_no": 51,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            V_PROPOSAL_ID,",
        "line_no": 52,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.EXPLORATORY_THEME_NO,",
        "line_no": 53,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.PROPOSAL_NAME,",
        "line_no": 54,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.PROPOSAL_STATUS_CD,",
        "line_no": 55,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.EVOLVED_THEME_NO,",
        "line_no": 56,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.MOLECULE_TYPE_ID,",
        "line_no": 57,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.PHARMACOLOGICAL_TYPE_ID,",
        "line_no": 58,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            :NEW.FIREWALL_ID",
        "line_no": 59,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        );",
        "line_no": 60,
        "is_end_semicolon": true
      },
      {
        "indent": 8,
        "line": "        IF :NEW.PARTNER_ID IS NOT NULL THEN",
        "line_no": 61,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            MDMAPPL.MDM_LOAD_NPM_PARTNER_DATA.LOAD_NPM_PARTNER_DATA(V_PROPOSAL_ID, :NEW.PARTNER_ID);",
        "line_no": 62,
        "is_end_semicolon": true
      },
      {
        "indent": 8,
        "line": "        END IF;",
        "line_no": 63,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    ELSIF (UPDATING) THEN",
        "line_no": 64,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        UPDATE V_NEW_MEDICINE_PROPOSALS",
        "line_no": 65,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        SET",
        "line_no": 66,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            EXPLORATORY_THEME_NO = :NEW.EXPLORATORY_THEME_NO,",
        "line_no": 67,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_NAME = :NEW.PROPOSAL_NAME,",
        "line_no": 68,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_STATUS_CD = :NEW.PROPOSAL_STATUS_CD,",
        "line_no": 69,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            EVOLVED_THEME_NO = V_EVOLVED_THEME_NO,",
        "line_no": 70,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            MOLECULE_TYPE_ID = :NEW.MOLECULE_TYPE_ID,",
        "line_no": 71,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PHARMACOLOGICAL_TYPE_ID = :NEW.PHARMACOLOGICAL_TYPE_ID,",
        "line_no": 72,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            FIREWALL_ID = :NEW.FIREWALL_ID",
        "line_no": 73,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        WHERE",
        "line_no": 74,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            PROPOSAL_ID = :NEW.PROPOSAL_ID;",
        "line_no": 75,
        "is_end_semicolon": true
      },
      {
        "indent": 8,
        "line": "        IF NVL(:OLD.PARTNER_ID, 'NULL') <> NVL(:NEW.PARTNER_ID, 'NULL') THEN",
        "line_no": 76,
        "is_end_semicolon": false
      },
      {
        "indent": 12,
        "line": "            MDMAPPL.MDM_LOAD_NPM_PARTNER_DATA.LOAD_NPM_PARTNER_DATA(:NEW.PROPOSAL_ID, :NEW.PARTNER_ID);",
        "line_no": 77,
        "is_end_semicolon": true
      },
      {
        "indent": 8,
        "line": "        END IF;",
        "line_no": 78,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    END IF;",
        "line_no": 79,
        "is_end_semicolon": true
      }
    ],
    "exception_handlers": [
      {
        "indent": 4,
        "line": "    WHEN DUP_VAL_ON_INDEX THEN",
        "line_no": 81,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE_APPLICATION_ERROR(-20600, V_TRIGGER_NAME);",
        "line_no": 82,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    WHEN V_NO_UPDATE_EVOLVED_TO_TERMINATED THEN",
        "line_no": 83,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE_APPLICATION_ERROR (-20800, V_TRIGGER_NAME);",
        "line_no": 84,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    WHEN V_NO_UPDATE_TO_EVOLVED THEN",
        "line_no": 85,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE_APPLICATION_ERROR(-20900, V_TRIGGER_NAME);",
        "line_no": 86,
        "is_end_semicolon": true
      },
      {
        "indent": 4,
        "line": "    WHEN V_EXPLORATORY_THEMENO_NOT_NULL THEN",
        "line_no": 87,
        "is_end_semicolon": false
      },
      {
        "indent": 8,
        "line": "        RAISE_APPLICATION_ERROR(-20940, V_TRIGGER_NAME);",
        "line_no": 88,
        "is_end_semicolon": true
      }
    ],
    "exception_line_no": 80,
    "end_line_no": 89
  },
  "sql_comments": [
    "-- status update to evolved is only allowed from the themes screen",
    "-- when the Former Proposal System Id in themes is set then",
    "-- the evolved_theme_no is set and the proposal_status_cd is set to 'E'",
    "-- Evolved to Terminated not allowed",
    "-- Evolved to Active",
    "-- not allowed to create NMP with exploratory_theme_no = null"
  ],
  "rest_strings": [],
  "conversion_stats": {
    "declaration_count": 10,
    "comment_count": 6,
    "rest_string_count": 0,
    "sql_convert_count": 0
  },
  "metadata": {
    "parse_timestamp": "2025-08-22T05:53:32.320804",
    "parser_version": "1.0"
  }
}