{
  "declarations": {
    "variables": [
      {
        "name": "V_USERID",
        "data_type": "TEXT",
        "default_value": null
      },
      {
        "name": "V_TRG_UPD_DATE_STR",
        "data_type": "TEXT",
        "default_value": null
      }
    ],
    "constants": [],
    "exceptions": []
  },
  "main": [
    {
      "type": "begin_end",
      "begin_line_no": 4,
      "begin_indent": 0,
      "begin_end_statements": [
        {
          "variable": "V_USERID",
          "value": "COALESCE(NEW.UPD_USER, OLD.UPD_USER)",
          "type": "assignment_statement",
          "statement_indent": 4,
          "statement_line_no": 5
        },
        {
          "variable": "V_TRG_UPD_DATE_STR",
          "value": "TO_CHAR(COALESCE(NEW.UPD_DATE, OLD.UPD_DATE), 'YYYY-MM-DD')",
          "type": "assignment_statement",
          "statement_indent": 4,
          "statement_line_no": 6
        },
        {
          "type": "if_else",
          "condition": "TG_OP = 'UPDATE'",
          "then_statements": [
            {
              "type": "if_else",
              "condition": "COALESCE (OLD.PROD_FAM_NAME_STATUS_CD, 'X') <> COALESCE (NEW.PROD_FAM_NAME_STATUS_CD, 'X') OR OLD.PROD_FAM_NAME <> NEW.PROD_FAM_NAME OR COALESCE(OLD.ACT_SUBSTANCE_NAME, 'X') <> COALESCE(NEW.ACT_SUBSTANCE_NAME, 'X')",
              "then_statements": [
                {
                  "type": "case_when",
                  "case_expression": "",
                  "when_clauses": [
                    {
                      "when_value": "NEW.PROD_FAM_NAME_STATUS_CD IN ('T', 'R')",
                      "then_statements": [
                        {
                          "sql_statement": "UPDATE GMD.THEME_MOLECULES SET MOLECULE_DESC = NEW.PROD_FAM_NAME WHERE PRODUCT_FAMILY_CD = NEW.PRODUCT_FAMILY_CD;",
                          "type": "update_statement",
                          "statement_indent": 20,
                          "statement_line_no": 11
                        }
                      ],
                      "when_line_no": 10
                    },
                    {
                      "when_value": "NEW.PROD_FAM_NAME_STATUS_CD IN ('G', 'I')",
                      "then_statements": [
                        {
                          "sql_statement": "UPDATE GMD.THEME_MOLECULES SET MOLECULE_DESC = NEW.ACT_SUBSTANCE_NAME WHERE PRODUCT_FAMILY_CD = NEW.PRODUCT_FAMILY_CD;",
                          "type": "update_statement",
                          "statement_indent": 20,
                          "statement_line_no": 17
                        }
                      ],
                      "when_line_no": 16
                    }
                  ],
                  "else_statements": [
                    {
                      "statement": "NULL;",
                      "type": "unknown_statement",
                      "indent": 20,
                      "line_no": 23
                    }
                  ],
                  "case_line_no": 9,
                  "case_indent": 12,
                  "when_line_nos": [
                    10,
                    16
                  ],
                  "else_line_no": 22,
                  "end_case_line_no": 24
                },
                {
                  "statement": "CALL GMD.GMD_UTIL_THEMES$UPD_THEME_DESC_JOB_PROC( P_PRODUCT_FAMILY_CD => NEW.PRODUCT_FAMILY_CD::TEXT, P_REGISTRAR => V_USERID::TEXT, P_TRG_TABLE => 'PRODUCT_FAMILIES'::TEXT, P_TRG_UPD_DATE => V_TRG_UPD_DATE_STR::TEXT );",
                  "type": "unknown_statement",
                  "indent": 12,
                  "line_no": 26
                }
              ],
              "else_if": [],
              "else_statements": [],
              "if_line_no": 8,
              "if_indent": 8,
              "else_if_line_nos": [],
              "else_line_no": null,
              "end_if_line_no": 32
            }
          ],
          "else_if": [],
          "else_statements": [],
          "if_line_no": 7,
          "if_indent": 4,
          "else_if_line_nos": [],
          "else_line_no": null,
          "end_if_line_no": 33
        },
        {
          "statement": "RETURN NULL;",
          "type": "unknown_statement",
          "indent": 4,
          "line_no": 35
        }
      ],
      "exception_handlers": [],
      "exception_line_no": 0,
      "end_line_no": 36
    }
  ],
  "sql_comments": [],
  "rest_strings": [
    {
      "statement": "NULL;",
      "type": "unknown_statement",
      "indent": 20,
      "line_no": 23
    },
    {
      "statement": "CALL GMD.GMD_UTIL_THEMES$UPD_THEME_DESC_JOB_PROC( P_PRODUCT_FAMILY_CD => NEW.PRODUCT_FAMILY_CD::TEXT, P_REGISTRAR => V_USERID::TEXT, P_TRG_TABLE => 'PRODUCT_FAMILIES'::TEXT, P_TRG_UPD_DATE => V_TRG_UPD_DATE_STR::TEXT );",
      "type": "unknown_statement",
      "indent": 12,
      "line_no": 26
    },
    {
      "statement": "NULL;",
      "type": "unknown_statement",
      "indent": 20,
      "line_no": 23
    },
    {
      "statement": "NULL;",
      "type": "unknown_statement",
      "indent": 20,
      "line_no": 23
    },
    {
      "statement": "RETURN NULL;",
      "type": "unknown_statement",
      "indent": 4,
      "line_no": 35
    }
  ],
  "sql_lines": [
    {
      "indent": 0,
      "line": "DECLARE",
      "line_no": 1,
      "is_end_semicolon": false
    },
    {
      "indent": 4,
      "line": "    V_USERID           TEXT;",
      "line_no": 2,
      "is_end_semicolon": true
    },
    {
      "indent": 4,
      "line": "    V_TRG_UPD_DATE_STR TEXT;",
      "line_no": 3,
      "is_end_semicolon": true
    },
    {
      "indent": 0,
      "line": "BEGIN",
      "line_no": 4,
      "is_end_semicolon": false
    },
    {
      "indent": 4,
      "line": "    V_USERID := COALESCE(NEW.UPD_USER, OLD.UPD_USER);",
      "line_no": 5,
      "is_end_semicolon": true
    },
    {
      "indent": 4,
      "line": "    V_TRG_UPD_DATE_STR := TO_CHAR(COALESCE(NEW.UPD_DATE, OLD.UPD_DATE), 'YYYY-MM-DD');",
      "line_no": 6,
      "is_end_semicolon": true
    },
    {
      "indent": 4,
      "line": "    IF TG_OP = 'UPDATE' THEN",
      "line_no": 7,
      "is_end_semicolon": false
    },
    {
      "indent": 8,
      "line": "        IF COALESCE (OLD.PROD_FAM_NAME_STATUS_CD, 'X') <> COALESCE (NEW.PROD_FAM_NAME_STATUS_CD, 'X') OR OLD.PROD_FAM_NAME <> NEW.PROD_FAM_NAME OR COALESCE(OLD.ACT_SUBSTANCE_NAME, 'X') <> COALESCE(NEW.ACT_SUBSTANCE_NAME, 'X') THEN",
      "line_no": 8,
      "is_end_semicolon": false
    },
    {
      "indent": 12,
      "line": "            CASE",
      "line_no": 9,
      "is_end_semicolon": false
    },
    {
      "indent": 16,
      "line": "                WHEN NEW.PROD_FAM_NAME_STATUS_CD IN ('T', 'R') THEN",
      "line_no": 10,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    UPDATE GMD.THEME_MOLECULES",
      "line_no": 11,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    SET",
      "line_no": 12,
      "is_end_semicolon": false
    },
    {
      "indent": 24,
      "line": "                        MOLECULE_DESC = NEW.PROD_FAM_NAME",
      "line_no": 13,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    WHERE",
      "line_no": 14,
      "is_end_semicolon": false
    },
    {
      "indent": 24,
      "line": "                        PRODUCT_FAMILY_CD = NEW.PRODUCT_FAMILY_CD;",
      "line_no": 15,
      "is_end_semicolon": true
    },
    {
      "indent": 16,
      "line": "                WHEN NEW.PROD_FAM_NAME_STATUS_CD IN ('G', 'I') THEN",
      "line_no": 16,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    UPDATE GMD.THEME_MOLECULES",
      "line_no": 17,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    SET",
      "line_no": 18,
      "is_end_semicolon": false
    },
    {
      "indent": 24,
      "line": "                        MOLECULE_DESC = NEW.ACT_SUBSTANCE_NAME",
      "line_no": 19,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    WHERE",
      "line_no": 20,
      "is_end_semicolon": false
    },
    {
      "indent": 24,
      "line": "                        PRODUCT_FAMILY_CD = NEW.PRODUCT_FAMILY_CD;",
      "line_no": 21,
      "is_end_semicolon": true
    },
    {
      "indent": 16,
      "line": "                ELSE",
      "line_no": 22,
      "is_end_semicolon": false
    },
    {
      "indent": 20,
      "line": "                    NULL;",
      "line_no": 23,
      "is_end_semicolon": true
    },
    {
      "indent": 12,
      "line": "            END CASE;",
      "line_no": 24,
      "is_end_semicolon": true
    },
    {
      "indent": 12,
      "line": "            CALL GMD.GMD_UTIL_THEMES$UPD_THEME_DESC_JOB_PROC(",
      "line_no": 26,
      "is_end_semicolon": false
    },
    {
      "indent": 16,
      "line": "                P_PRODUCT_FAMILY_CD => NEW.PRODUCT_FAMILY_CD::TEXT,",
      "line_no": 27,
      "is_end_semicolon": false
    },
    {
      "indent": 16,
      "line": "                P_REGISTRAR => V_USERID::TEXT,",
      "line_no": 28,
      "is_end_semicolon": false
    },
    {
      "indent": 16,
      "line": "                P_TRG_TABLE => 'PRODUCT_FAMILIES'::TEXT,",
      "line_no": 29,
      "is_end_semicolon": false
    },
    {
      "indent": 16,
      "line": "                P_TRG_UPD_DATE => V_TRG_UPD_DATE_STR::TEXT",
      "line_no": 30,
      "is_end_semicolon": false
    },
    {
      "indent": 12,
      "line": "            );",
      "line_no": 31,
      "is_end_semicolon": true
    },
    {
      "indent": 8,
      "line": "        END IF;",
      "line_no": 32,
      "is_end_semicolon": true
    },
    {
      "indent": 4,
      "line": "    END IF;",
      "line_no": 33,
      "is_end_semicolon": true
    },
    {
      "indent": 4,
      "line": "    RETURN NULL;",
      "line_no": 35,
      "is_end_semicolon": true
    },
    {
      "indent": 0,
      "line": "END;",
      "line_no": 36,
      "is_end_semicolon": true
    }
  ],
  "conversion_stats": {
    "declaration_count": 2,
    "comment_count": 0,
    "rest_string_count": 5,
    "sql_convert_count": 19
  },
  "metadata": {
    "parse_timestamp": "2025-08-22T00:31:33.563501",
    "parser_version": "1.0"
  }
}